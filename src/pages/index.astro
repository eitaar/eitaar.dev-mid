---
import Layout from '../layouts/Layout.astro';
import Top from '../components/Top.vue';
import "../styles/global.css";
import { Image } from 'astro:assets';
import wahoot from '../assets/img/wahoot.png';
import { Icon } from 'astro-icon/components';
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger);
---

<Layout title="eitaar.dev" loadNavBar=false>
    <Image src={wahoot} alt="Wahoot" class="absolute opacity-60 IMG h-screen object-cover"/> 
    <Top class="absolute">
        <Icon name="mdi:github" slot="githubIcon" class="absolute" width={'100%'} height={'100%'}/>
        <p class="link" slot="ProjectLink" id="projectLink">Projects</p>
    </Top>
    <!-- Add extra space at the bottom -->
    <div class="h-screen absolute top-[100vh] left-0 w-full">
        <h2 class="text-center text-[3.5vw] font-bold font-Quantico link PROJECTS">Projects</h2>
    </div>
</Layout>

<script>
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { ScrollToPlugin } from "gsap/ScrollToPlugin";
gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

console.log("using GSAP: ", gsap.version);

// Animate the .TOP element
gsap.to('.TOP', {
  x: '-40vw',
  scrollTrigger: {
    trigger: '.TOP',
    start: 'top+=1vh top',
    end: 'bottom top',
    markers: false,
    scrub: true,
    pin: true,
  }
});

function scrollToProjects() {
  const target = document.querySelector('.PROJECTS');
  if (target) {
    gsap.to(window, { duration: 0.1, scrollTo: { y: target } });
  } else {
    console.error('Element with class .PROJECTS not found');
  }
}

// Attach the click event listener to the link
document.addEventListener('DOMContentLoaded', () => {
  const link = document.getElementById('projectLink');
  if (link) {
    link.addEventListener('click', scrollToProjects);
  } else {
    console.error('Element with id #scrollToProjectsLink not found');
  }
});
</script>